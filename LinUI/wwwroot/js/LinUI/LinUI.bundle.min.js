function copy(n){let t=document.createElement("input");document.body.appendChild(t);t.value=n;t.select();document.execCommand("copy")&&document.execCommand("copy");document.body.removeChild(t)}function backPage(){history.back()}function getHistoryLength(){return history.length}function Toast(n){this.instance=null;this.options={delay:3e3,fontSize:"12px"};let t=document.createElement("div");return t.id=names.toast,this.options=Object.assign({},this.options,n),t.innerHTML=`<span class="t-toast-text" style="font-size: ${this.options.fontSize}"></span>`,document.body.append(t),this}function initToast(n){Toast.getSingle(n)}function Loading(n){_options={tip:"加载中...",icon:"icon-loading1",iconSIze:18,bgColor:"rgba(255,255,255,0.8)",color:"#333",iconColor:"#999"};this.instance=null;let t=document.querySelectorAll(".t-loading-box");if(!(t.length>0))return this._options=Object.assign({},this._options,n),this.doc=document.createElement("div"),this.doc.style.backgroundColor=this._options.bgColor,this.doc.className="t-loading-box",this.doc.innerHTML=`
            <div class="t-loading-body">
                <div class="t-loading-icon">
                    <i class="iconfont ${this._options.icon}" style="color:${this._options.iconColor};font-size: ${this._options.iconSIze}px"></i>
                </div>
                <div class="t-loading-tip" style="color: ${this._options.color};">
                    ${this._options.tip}
                </div>
            </div> 
        `,document.body.append(this.doc),this}function handleComponents(n,t,i){let r;switch(n){case"Toast":r=Toast.getSingle();break;case"Loading":r=Loading.getLoading()}let u=r[t];typeof u=="function"&&(i==null?u():u(i))}function getClass(n,t){return n.getElementsByClassName(t)}function MobileSelect(n){this.mobileSelect;this.wheelsData=n.wheels;this.jsonType=!1;this.cascadeJsonData=[];this.displayJson=[];this.curValue=null;this.curIndexArr=[];this.cascade=!1;this.startY;this.moveEndY;this.moveY;this.oldMoveY;this.offset=0;this.offsetSum=0;this.oversizeBorder;this.curDistance=[];this.clickStatus=!1;this.isPC=!0;this.init(n)}function initSelect(n,t,i,r,u,f){console.log("初始化重复");new MobileSelect({trigger:"#"+t,title:i,wheels:r,position:f,connector:u,callback:function(t,i){n.invokeMethodAsync("Selected",t,i)},transitionEnd:function(t,i){n.invokeMethodAsync("SelectChange",t,i)}})}function tTabClick(n,t){let e=n.querySelectorAll(".t-tab-item"),i=n.getElementsByClassName("t-tab-box")[0],u=n.clientWidth,f=i.scrollWidth;if(!(f<u)){if(t===0||t===1){i.style.transform="translateX(0)";return}let r=0;for(let n=0;n<t-1;n++)f-r>u&&(r+=e[n].clientWidth);i.style.transform="translateX("+-r+"px)"}}const names={toast:"T-Toast"};Toast.prototype.show=function(n){let t=document.getElementById(names.toast);t.style.display="block";t.style.opacity="1";t.querySelector(".t-toast-text").innerHTML=n;setTimeout(function(){t.style.opacity="0";setTimeout(function(){t.style.display="none"},200)},this.options.delay)};Toast.getSingle=function(n){return this.instance==null?new Toast(n):this.instance};Loading.prototype.show=function(){console.log("showLoading");let n=document.querySelector(".t-loading-box");n.className="t-loading-box t-loading-show"};Loading.prototype.hide=function(){let n=document.querySelector(".t-loading-box");n.className="t-loading-box"};Loading.prototype.correctTip=function(n){this.doc.querySelector(".t-loading-top").innerText=n};Loading.prototype._setOptions=function(n){document.body.querySelector(".t-loading.box").remove();Loading.instance=new Loading(n)};Loading.getLoading=function(n){return Loading.instance==null?Loading.instance=new Loading(n):n&&Loading.instance._setOptions(n),Loading.instance};MobileSelect.prototype={constructor:MobileSelect,init:function(n){var t=this,r,i;if(t.keyMap=n.keyMap?n.keyMap:{id:"id",value:"value",childs:"childs"},t.checkDataType(),t.renderWheels(t.wheelsData,n.cancelBtnText,n.ensureBtnText),t.trigger=document.querySelector(n.trigger),!t.trigger)return console.error("mobileSelect has been successfully installed, but no trigger found on your page."),!1;if(t.wheel=getClass(t.mobileSelect,"wheel"),t.slider=getClass(t.mobileSelect,"selectContainer"),t.wheels=t.mobileSelect.querySelector(".wheels"),t.liHeight=t.mobileSelect.querySelector("li").offsetHeight,t.ensureBtn=t.mobileSelect.querySelector(".ensure"),t.cancelBtn=t.mobileSelect.querySelector(".cancel"),t.grayLayer=t.mobileSelect.querySelector(".grayLayer"),t.popUp=t.mobileSelect.querySelector(".content"),t.callback=n.callback||function(){},t.transitionEnd=n.transitionEnd||function(){},t.onShow=n.onShow||function(){},t.onHide=n.onHide||function(){},t.initPosition=n.position||[],t.titleText=n.title||"",t.connector=n.connector||" ",t.triggerDisplayData=(typeof n.triggerDisplayData=="undefined")?!0:n.triggerDisplayData,t.trigger.style.cursor="pointer",t.setStyle(n),t.setTitle(t.titleText),t.checkIsPC(),t.checkCascade(),t.addListenerAll(),t.cascade&&t.initCascade(),t.initPosition.length<t.slider.length)for(r=t.slider.length-t.initPosition.length,i=0;i<r;i++)t.initPosition.push(0);t.setCurDistance(t.initPosition);t.cancelBtn.addEventListener("click",function(){t.hide()});t.ensureBtn.addEventListener("click",function(){var i,n;for(t.hide(),t.liHeight||(t.liHeight=t.mobileSelect.querySelector("li").offsetHeight),i="",n=0;n<t.wheel.length;n++)i+=n==t.wheel.length-1?t.getInnerHtml(n):t.getInnerHtml(n)+t.connector;t.triggerDisplayData&&(t.trigger.innerHTML=i);t.curIndexArr=t.getIndexArr();t.curValue=t.getCurValue();t.callback(t.curIndexArr,t.curValue)});t.trigger.addEventListener("click",function(){t.show()});t.grayLayer.addEventListener("click",function(){t.hide()});t.popUp.addEventListener("click",function(n){n.stopPropagation()});t.fixRowStyle()},setTitle:function(n){var t=this;t.titleText=n;t.mobileSelect.querySelector(".title").innerHTML=t.titleText},setStyle:function(n){var t=this;n.ensureBtnColor&&(t.ensureBtn.style.color=n.ensureBtnColor);n.cancelBtnColor&&(t.cancelBtn.style.color=n.cancelBtnColor);n.titleColor&&(t.title=t.mobileSelect.querySelector(".title"),t.title.style.color=n.titleColor);n.textColor&&(t.panel=t.mobileSelect.querySelector(".panel"),t.panel.style.color=n.textColor);n.titleBgColor&&(t.btnBar=t.mobileSelect.querySelector(".btnBar"),t.btnBar.style.backgroundColor=n.titleBgColor);n.bgColor&&(t.panel=t.mobileSelect.querySelector(".panel"),t.shadowMask=t.mobileSelect.querySelector(".shadowMask"),t.panel.style.backgroundColor=n.bgColor,t.shadowMask.style.background="linear-gradient(to bottom, "+n.bgColor+", rgba(255, 255, 255, 0), "+n.bgColor+")");isNaN(n.maskOpacity)||(t.grayMask=t.mobileSelect.querySelector(".grayLayer"),t.grayMask.style.background="rgba(0, 0, 0, "+n.maskOpacity+")")},checkIsPC:function(){var t=this,n=navigator.userAgent.toLowerCase(),i=n.match(/ipad/i)=="ipad",r=n.match(/iphone os/i)=="iphone os",u=n.match(/midp/i)=="midp",f=n.match(/rv:1.2.3.4/i)=="rv:1.2.3.4",e=n.match(/ucweb/i)=="ucweb",o=n.match(/android/i)=="android",s=n.match(/windows ce/i)=="windows ce",h=n.match(/windows mobile/i)=="windows mobile";(i||r||u||f||e||o||s||h)&&(t.isPC=!1)},show:function(){if(this.mobileSelect.classList.add("mobileSelect-show"),typeof this.onShow=="function")this.onShow(this)},hide:function(){if(this.mobileSelect.classList.remove("mobileSelect-show"),typeof this.onHide=="function")this.onHide(this)},renderWheels:function(n,t,i){var u=this,o=t?t:"取消",s=i?i:"确认",e,f,r;for(u.mobileSelect=document.createElement("div"),u.mobileSelect.className="mobileSelect",u.mobileSelect.innerHTML='<div class="grayLayer"><\/div><div class="content"><div class="btnBar"><div class="fixWidth"><div class="cancel">'+o+'<\/div><div class="title"><\/div><div class="ensure">'+s+'<\/div><\/div><\/div><div class="panel"><div class="fixWidth"><div class="wheels"><\/div><div class="selectLine"><\/div><div class="shadowMask"><\/div><\/div><\/div><\/div>',document.body.appendChild(u.mobileSelect),e="",f=0;f<n.length;f++){if(e+='<div class="wheel"><ul class="selectContainer">',u.jsonType)for(r=0;r<n[f].data.length;r++)e+='<li data-id="'+n[f].data[r][u.keyMap.id]+'">'+n[f].data[r][u.keyMap.value]+"<\/li>";else for(r=0;r<n[f].data.length;r++)e+="<li>"+n[f].data[r]+"<\/li>";e+="<\/ul><\/div>"}u.mobileSelect.querySelector(".wheels").innerHTML=e},addListenerAll:function(){for(var n=this,t=0;t<n.slider.length;t++)(function(t){n.addListenerWheel(n.wheel[t],t)})(t)},addListenerWheel:function(n,t){var i=this;n.addEventListener("touchstart",function(n){i.touch(n,this.firstChild,t)},!1);n.addEventListener("touchend",function(n){i.touch(n,this.firstChild,t)},!1);n.addEventListener("touchmove",function(n){i.touch(n,this.firstChild,t)},!1);i.isPC&&(n.addEventListener("mousedown",function(n){i.dragClick(n,this.firstChild,t)},!1),n.addEventListener("mousemove",function(n){i.dragClick(n,this.firstChild,t)},!1),n.addEventListener("mouseup",function(n){i.dragClick(n,this.firstChild,t)},!0))},checkDataType:function(){var n=this;typeof n.wheelsData[0].data[0]=="object"&&(n.jsonType=!0)},checkCascade:function(){var n=this,i,t;if(n.jsonType){for(i=n.wheelsData[0].data,t=0;t<i.length;t++)if(n.keyMap.childs in i[t]&&i[t][n.keyMap.childs].length>0){n.cascade=!0;n.cascadeJsonData=n.wheelsData[0].data;break}}else n.cascade=!1},generateArrData:function(n){for(var i,r=[],u=this.keyMap.id,f=this.keyMap.value,t=0;t<n.length;t++)i={},i[u]=n[t][this.keyMap.id],i[f]=n[t][this.keyMap.value],r.push(i);return r},initCascade:function(){var n=this;n.displayJson.push(n.generateArrData(n.cascadeJsonData));n.initPosition.length>0?(n.initDeepCount=0,n.initCheckArrDeep(n.cascadeJsonData[n.initPosition[0]])):n.checkArrDeep(n.cascadeJsonData[0]);n.reRenderWheels()},initCheckArrDeep:function(n){var t=this,i;n&&t.keyMap.childs in n&&n[t.keyMap.childs].length>0&&(t.displayJson.push(t.generateArrData(n[t.keyMap.childs])),t.initDeepCount++,i=n[t.keyMap.childs][t.initPosition[t.initDeepCount]],i?t.initCheckArrDeep(i):t.checkArrDeep(n[t.keyMap.childs][0]))},checkArrDeep:function(n){var t=this;n&&t.keyMap.childs in n&&n[t.keyMap.childs].length>0&&(t.displayJson.push(t.generateArrData(n[t.keyMap.childs])),t.checkArrDeep(n[t.keyMap.childs][0]))},checkRange:function(n,t){for(var u,i=this,f=i.displayJson.length-1-n,r=0;r<f;r++)i.displayJson.pop();for(r=0;r<=n;r++)u=r==0?i.cascadeJsonData[t[0]]:u[i.keyMap.childs][t[r]];i.checkArrDeep(u);i.reRenderWheels();i.fixRowStyle();i.setCurDistance(i.resetPosition(n,t))},resetPosition:function(n,t){var u=this,r=t,f,i;if(u.slider.length>t.length)for(f=u.slider.length-t.length,i=0;i<f;i++)r.push(0);else if(u.slider.length<t.length)for(f=t.length-u.slider.length,i=0;i<f;i++)r.pop();for(i=n+1;i<r.length;i++)r[i]=0;return r},reRenderWheels:function(){var n=this,i,t;if(n.wheel.length>n.displayJson.length)for(i=n.wheel.length-n.displayJson.length,t=0;t<i;t++)n.wheels.removeChild(n.wheel[n.wheel.length-1]);for(t=0;t<n.displayJson.length;t++)(function(t){var r="",u,i;if(n.wheel[t]){for(i=0;i<n.displayJson[t].length;i++)r+='<li data-id="'+n.displayJson[t][i][n.keyMap.id]+'">'+n.displayJson[t][i][n.keyMap.value]+"<\/li>";n.slider[t].innerHTML=r}else{for(u=document.createElement("div"),u.className="wheel",r='<ul class="selectContainer">',i=0;i<n.displayJson[t].length;i++)r+='<li data-id="'+n.displayJson[t][i][n.keyMap.id]+'">'+n.displayJson[t][i][n.keyMap.value]+"<\/li>";r+="<\/ul>";u.innerHTML=r;n.addListenerWheel(u,t);n.wheels.appendChild(u)}})(t)},updateWheels:function(n){var t=this,r,i;if(t.cascade){if(t.cascadeJsonData=n,t.displayJson=[],t.initCascade(),t.initPosition.length<t.slider.length)for(r=t.slider.length-t.initPosition.length,i=0;i<r;i++)t.initPosition.push(0);t.setCurDistance(t.initPosition);t.fixRowStyle()}},updateWheel:function(n,t){var r=this,u="",i;if(r.cascade)return console.error("级联格式不支持updateWheel(),请使用updateWheels()更新整个数据源"),!1;if(r.jsonType){for(i=0;i<t.length;i++)u+='<li data-id="'+t[i][r.keyMap.id]+'">'+t[i][r.keyMap.value]+"<\/li>";r.wheelsData[n]={data:t}}else{for(i=0;i<t.length;i++)u+="<li>"+t[i]+"<\/li>";r.wheelsData[n]=t}r.slider[n].innerHTML=u},fixRowStyle:function(){for(var n=this,i=(100/n.wheel.length).toFixed(2),t=0;t<n.wheel.length;t++)n.wheel[t].style.width=i+"%"},getIndex:function(n){return Math.round((2*this.liHeight-n)/this.liHeight)},getIndexArr:function(){for(var n=this,i=[],t=0;t<n.curDistance.length;t++)i.push(n.getIndex(n.curDistance[t]));return i},getCurValue:function(){var t=this,i=[],r=t.getIndexArr(),n;if(t.cascade)for(n=0;n<t.wheel.length;n++)i.push(t.displayJson[n][r[n]]);else if(t.jsonType)for(n=0;n<t.curDistance.length;n++)i.push(t.wheelsData[n].data[t.getIndex(t.curDistance[n])]);else for(n=0;n<t.curDistance.length;n++)i.push(t.getInnerHtml(n));return i},getValue:function(){return this.curValue},calcDistance:function(n){return 2*this.liHeight-n*this.liHeight},setCurDistance:function(n){for(var t=this,r=[],i=0;i<t.slider.length;i++)r.push(t.calcDistance(n[i])),t.movePosition(t.slider[i],r[i]);t.curDistance=r},fixPosition:function(n){return-(this.getIndex(n)-2)*this.liHeight},movePosition:function(n,t){n.style.webkitTransform="translate3d(0,"+t+"px, 0)";n.style.transform="translate3d(0,"+t+"px, 0)"},locatePosition:function(n,t){var i=this;this.curDistance[n]=this.calcDistance(t);this.movePosition(this.slider[n],this.curDistance[n]);i.cascade&&i.checkRange(n,i.getIndexArr())},updateCurDistance:function(n,t){this.curDistance[t]=n.style.transform?parseInt(n.style.transform.split(",")[1]):parseInt(n.style.webkitTransform.split(",")[1])},getDistance:function(n){return n.style.transform?parseInt(n.style.transform.split(",")[1]):parseInt(n.style.webkitTransform.split(",")[1])},getInnerHtml:function(n){var i=this,r=i.slider[n].getElementsByTagName("li").length,t=i.getIndex(i.curDistance[n]);return t>=r?t=r-1:t<0&&(t=0),i.slider[n].getElementsByTagName("li")[t].innerHTML},touch:function(n,t,i){var r=this,f,e,u;n=n||window.event;switch(n.type){case"touchstart":r.startY=n.touches[0].clientY;r.startY=parseInt(r.startY);r.oldMoveY=r.startY;break;case"touchend":r.moveEndY=parseInt(n.changedTouches[0].clientY);r.offsetSum=r.moveEndY-r.startY;r.oversizeBorder=-(t.getElementsByTagName("li").length-3)*r.liHeight;r.offsetSum==0?(f=parseInt((document.documentElement.clientHeight-r.moveEndY)/40),f!=2&&(e=f-2,u=r.curDistance[i]+e*r.liHeight,u<=2*r.liHeight&&u>=r.oversizeBorder&&(r.curDistance[i]=u,r.movePosition(t,r.curDistance[i]),r.transitionEnd(r.getIndexArr(),r.getCurValue())))):(r.updateCurDistance(t,i),r.curDistance[i]=r.fixPosition(r.curDistance[i]),r.movePosition(t,r.curDistance[i]),r.curDistance[i]+r.offsetSum>2*r.liHeight?(r.curDistance[i]=2*r.liHeight,setTimeout(function(){r.movePosition(t,r.curDistance[i])},100)):r.curDistance[i]+r.offsetSum<r.oversizeBorder&&(r.curDistance[i]=r.oversizeBorder,setTimeout(function(){r.movePosition(t,r.curDistance[i])},100)),r.transitionEnd(r.getIndexArr(),r.getCurValue()));r.cascade&&r.checkRange(i,r.getIndexArr());break;case"touchmove":n.preventDefault();r.moveY=n.touches[0].clientY;r.offset=r.moveY-r.oldMoveY;r.updateCurDistance(t,i);r.curDistance[i]=r.curDistance[i]+r.offset;r.movePosition(t,r.curDistance[i]);r.oldMoveY=r.moveY}},dragClick:function(n,t,i){var r=this,f,e,u;n=n||window.event;switch(n.type){case"mousedown":r.startY=n.clientY;r.oldMoveY=r.startY;r.clickStatus=!0;break;case"mouseup":r.moveEndY=n.clientY;r.offsetSum=r.moveEndY-r.startY;r.oversizeBorder=-(t.getElementsByTagName("li").length-3)*r.liHeight;r.offsetSum==0?(f=parseInt((document.documentElement.clientHeight-r.moveEndY)/40),f!=2&&(e=f-2,u=r.curDistance[i]+e*r.liHeight,u<=2*r.liHeight&&u>=r.oversizeBorder&&(r.curDistance[i]=u,r.movePosition(t,r.curDistance[i]),r.transitionEnd(r.getIndexArr(),r.getCurValue())))):(r.updateCurDistance(t,i),r.curDistance[i]=r.fixPosition(r.curDistance[i]),r.movePosition(t,r.curDistance[i]),r.curDistance[i]+r.offsetSum>2*r.liHeight?(r.curDistance[i]=2*r.liHeight,setTimeout(function(){r.movePosition(t,r.curDistance[i])},100)):r.curDistance[i]+r.offsetSum<r.oversizeBorder&&(r.curDistance[i]=r.oversizeBorder,setTimeout(function(){r.movePosition(t,r.curDistance[i])},100)),r.transitionEnd(r.getIndexArr(),r.getCurValue()));r.clickStatus=!1;r.cascade&&r.checkRange(i,r.getIndexArr());break;case"mousemove":n.preventDefault();r.clickStatus&&(r.moveY=n.clientY,r.offset=r.moveY-r.oldMoveY,r.updateCurDistance(t,i),r.curDistance[i]=r.curDistance[i]+r.offset,r.movePosition(t,r.curDistance[i]),r.oldMoveY=r.moveY)}}};